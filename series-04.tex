\documentclass[french,a4paper,addpoints,11pt]{exam}
\usepackage{hexercises}
\usepackage{mathtools, nccmath}
\title{Boucles}
\seriesno{\texttt{0x04}}
\department{TIN}
\classroom{INFO1-TIN}

\setlength\answerlinelength{10 cm}
\setlength\answerskip{3ex}
\setlength\answerclearance{1.1ex}
\CorrectChoiceEmphasis{}
\renewcommand{\thepartno}{\alph{partno}}
\renewcommand{\partlabel}{\thepartno.}
\renewcommand{\arraystretch}{1.75} % expand the cells vertically

\begin{document}
\maketitle
\thispagestyle{headandfoot}

\begin{questions}

\question Considérons le cas d'un système de vision industrielle qui inspecte des pièces fabriquées au sein d'une ligne d'assemblage. Le programme de ce système de vision comporte certaines variables internes permettant de mémoriser le décompte des pièces analysées. Ces variables sont les suivantes :

\begin{lstlisting}
  int nb_parts = 2000;
  int nb_parts_bad = 200;
  double percent_good = (nb_parts - nb_parts_bad) / nb_parts;
\end{lstlisting}

\begin{parts}
  \part Quel résultats espérait le développeur ?
  \ifprintanswers
  \begin{solution}
  Avec 200 pièces mauvaises sur 2000 pièces produites, le programmeur attendait un résultat de 0.9, signifiant 90 \% de pièces bonnes.
  \end{solution}
  \else
  \fillwithdottedlines{2cm}
  \fi

  \part Qu'obtient-il dans la pratique ?
  \ifprintanswers
  \begin{solution}
  0.0
  \end{solution}
  \else
  \fillwithdottedlines{1cm}
  \fi
  \part Expliquez les défaut constaté ?
  \ifprintanswers
  \begin{solution}
    Le calcul effectue la division entière 1800 / 2000, qui donne comme résultat 0. Ensuite, le résultat est transformé en float et donne 0.0
  \end{solution}
  \else
  \fillwithdottedlines{1cm}
  \fi
  \part Que corriger pour obtenir un résultat correct ?
  \ifprintanswers
  \begin{solution}
\begin{lstlisting}
int nb_parts = 2000;
int nb_parts_bad = 200;
double percent_good = (double)(nb_parts - nb_parts_bad) / nb_parts;
\end{lstlisting}
  \end{solution}
  \else
  \fillwithdottedlines{1cm}
  \fi
\end{parts}

\question Indiquer si les affirmations suivantes sont justes ou fausses.
Dans les cas où elles sont fausses, expliquer ce qui serait correct pour une instruction \CD{do..while} :
\begin{parts}
\part Les instructions de la boucle sont toujours exécutées au moins une fois.

\ifprintanswers
\begin{solution}
Correct
\end{solution}
\else
\fillwithdottedlines{1cm}
\fi

\part Comme un mot réservé spécifique commence et termine la boucle, on n'a pas besoin de créer un bloc lorsque l'on a plusieurs instructions.

\ifprintanswers
\begin{solution}
Incorrect, il faut utiliser un bloc s’il y a plusieurs instructions dans la boucle.
\end{solution}
\else
\fillwithdottedlines{1cm}
\fi

\part La condition se trouvant en fin de boucle, on sort de la boucle lorsque la condition est vraie.

\ifprintanswers
\begin{solution}
Incorrect, on sort de la boucle lorsque la condition est fausse.
\end{solution}
\else
\fillwithdottedlines{1cm}
\fi

\part Le type de la condition peut être char.

\ifprintanswers
\begin{solution}
Correct
\end{solution}
\else
\fillwithdottedlines{1cm}
\fi


\part Les instructions de la boucle ne peuvent pas être une autre boucle \CD{do..while}.

\ifprintanswers
\begin{solution}
Incorrect. Une boucle do while peut se trouver à l’intérieur d’une boucle \CD{do..while}.
\end{solution}
\else
\fillwithdottedlines{1cm}
\fi

\end{parts}

\question
\begin{parts}
\part Écrire un programme qui affiche les nombres entiers de 1 à 100 en employant une boucle \CD{for}.

\ifprintanswers
\begin{solution}
\begin{lstlisting}
#include <stdio.h>

int main() {
    for (int i = 1; i <= 100; i++)
        printf("%d\n", i);
}
\end{lstlisting}
\end{solution}
\else
\fillwithdottedlines{5cm}
\fi

\part Écrire ce même programme en utilisant une boucle \CD{while}

\ifprintanswers
\begin{solution}
\begin{lstlisting}
#include <stdio.h>

int main() {
    int i = 1;
    while (i <= 100)
        printf("%d\n", i++);
}
\end{lstlisting}
\end{solution}
\else
\fillwithdottedlines{5cm}
\fi

\part Même question avec une boucle \CD{do..while}

\ifprintanswers
\begin{solution}
\begin{lstlisting}
  #include <stdio.h>

  int main() {
      int i = 1;
      do {
          printf("%d\n", i++);
      } while (i <= 100)
  }
  \end{lstlisting}
\end{solution}
\else
\fillwithdottedlines{5cm}
\fi

\part Parmis ces trois implémentation laquelle est la plus adaptée au problème ?

\ifprintanswers
\begin{solution}
Lorsque le nombre d'itérations est connu à l'avance, la boucle \CD{for} est la plus adaptée.
\end{solution}
\else
\fillwithdottedlines{3cm}
\fi

\end{parts}

\clearpage
\question Boucles \CD{for} : renseignez ce qu'affiche ces boucles.
\begin{parts}
\part
\begin{lstlisting}
for (i = 'a'; i < 'd'; printf("%i-", ++i));
\end{lstlisting}
\answerline[98-99-100-]
\part
\begin{lstlisting}
for (i = 'a'; i < 'd'; printf("%c-", ++i));
\end{lstlisting}
\answerline[b-c-d-]
\part
\begin{lstlisting}
for (i = 'a'; i++ < 'd'; printf("%c-", i ));
\end{lstlisting}
\answerline[b-c-d]
\part
\begin{lstlisting}
for (i = 'a'; i <= 'a' + 25; printf("%c-", i++ ));
\end{lstlisting}
\answerline[a-b-c-d-...z-]
\part
\begin{lstlisting}
for (i = 1 / 3; i ; printf("%i\n", i++ ));
\end{lstlisting}
\answerline[(rien)]
\part
\begin{lstlisting}
for (i = 0; i != 1  ; printf("%i", i += 1 / 3 ));
\end{lstlisting}
\answerline[0000 ...]
\part
\begin{lstlisting}
for (i = 12, k = 1; k++ < 5 ; printf("%i ", i-- ));
\end{lstlisting}
\answerline[12 11 10 9 ]
\end{parts}

\clearpage
\question Boucles \CD{while} : renseignez ce qu'affiche ces boucles.
\begin{parts}
\part
\begin{lstlisting}
int i = 0;
while (i - 10) { i += 2; printf ( "%i.", i ); }
\end{lstlisting}
\answerline[2.4.6.8.10.]
\part
\begin{lstlisting}
int i = 0;
while (i - 10)
i += 2; printf("%i-", i);
\end{lstlisting}
\answerline[10-]
\part
\begin{lstlisting}
short i = 0;
while ( i < 11 ) { i += 2; printf("%i-", i); }
\end{lstlisting}
\answerline[2-4-6-8-10-12-]
\part
\begin{lstlisting}
for (i = 'a'; i <= 'a' + 25; printf("%c-", i++ ));
\end{lstlisting}
\answerline[a-b-c-d-...z-]
\part
\begin{lstlisting}
char i = 11;
while (i--) { printf("%i/", i--); }
\end{lstlisting}
\answerline[10/8/6/4/2/0/-2/-4/-6/-8 ... (à l'infini)]
\part
\begin{lstlisting}
long i = 12l;
while (i--) { printf("%i%%", --i); }
\end{lstlisting}
\answerline[10\%8\%6\%4\%2\%0\%]
\part
\begin{lstlisting}
int i = 0;
while (i++ < 10) { printf("%i", i--); }
\end{lstlisting}
\answerline[1111111111 ... (à l'infini)]

\part
\begin{lstlisting}
int i = 1;
while (i <= 5) { printf("%i/", 2 * i++); }
\end{lstlisting}
\answerline[2/4/6/8/10/]

\part
\begin{lstlisting}
int i = 1;
while (i != 9) { printf ( "%i-", i = i + 2 ); }
\end{lstlisting}
\answerline[3-5-7-9-]

\part
\begin{lstlisting}
int i = 1;
while ( i < 9 ) { printf ( "%i", i += 2 ); break; }
\end{lstlisting}
\answerline[3]

\end{parts}

\end{questions}

\end{document}
